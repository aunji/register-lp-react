{"ast":null,"code":"import _objectSpread from\"/Users/macintosh/Documents/Work_project/registerlp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/macintosh/Documents/Work_project/registerlp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/macintosh/Documents/Work_project/registerlp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/macintosh/Documents/Work_project/registerlp/node_modules/@babel/runtime/regenerator/index.js\";import*as React from\"react\";import Grid from\"@mui/material/Grid\";import Typography from\"@mui/material/Typography\";import{useEffect,useState}from\"react\";import Autocomplete from\"@mui/material/Autocomplete\";import TextField from\"@mui/material/TextField\";import{Box}from\"@mui/system\";import CircularProgress from'@mui/material/CircularProgress';import{jsx as _jsx}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function sleep(){var delay=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return new Promise(function(resolve){setTimeout(resolve,delay);});}export default function LocationForm(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),location=_useState2[0],setLocation=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelection=_useState4[1];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var loading=open&&location.length===0;//http://agent.land-prom.com/api/location.php\n//   async function fetchData() {\n//     const res = await fetch(\"http://agent.land-prom.com/api/location.php\");\n//     res.json().then((res) => setLocation(res));\n//   \n// useEffect(() => {\n//   fetch(\"http://agent.land-prom.com/api/location.php\").then((res) =>\n//     res.json().then((res) => setLocation(res))\n//   );\n// }, []);\nuseEffect(function(){var active=true;if(!loading){return undefined;}_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return sleep(1e3);case 2:// For demo purposes.\nif(active){fetch(\"http://agent.land-prom.com/api/location.php\").then(function(res){return res.json().then(function(res){return setLocation(res);});});}case 3:case\"end\":return _context.stop();}}},_callee);}))();return function(){active=false;};},[loading]);React.useEffect(function(){if(!open){setLocation([]);}},[open]);//   console.log(selected);\n//   console.log(selected.id);\nreturn/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\u0E17\\u0E33\\u0E40\\u0E25\\u0E17\\u0E35\\u0E48\\u0E15\\u0E31\\u0E49\\u0E07\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Autocomplete,{open:open,onOpen:function onOpen(){setOpen(true);},onClose:function onClose(){setOpen(false);},id:\"location\",loading:loading,options:location,isOptionEqualToValue:function isOptionEqualToValue(location,value){return location.id===value.id;},onChange:function onChange(event,value){return setSelection(value);},getOptionLabel:function getOptionLabel(location){return\"\".concat(location.district,\" \").concat(location.city,\" \").concat(location.province,\" \").concat(location.zipcode);},renderOption:function renderOption(props,location){return/*#__PURE__*/_createElement(Box,_objectSpread(_objectSpread({component:\"li\"},props),{},{key:location.id}),location.district,\"  \",location.city,\" \",location.province,\" \",location.zipcode);},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E17\\u0E33\\u0E40\\u0E25\",InputProps:_objectSpread(_objectSpread({},params.InputProps),{},{endAdornment:/*#__PURE__*/_jsxs(React.Fragment,{children:[loading?/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\",size:20}):null,params.InputProps.endAdornment]})})}));},noOptionsText:'ไม่พบทำเล'})})})]});}","map":{"version":3,"sources":["/Users/macintosh/Documents/Work_project/registerlp/src/LocationForm.js"],"names":["React","Grid","Typography","useEffect","useState","Autocomplete","TextField","Box","CircularProgress","sleep","delay","Promise","resolve","setTimeout","LocationForm","location","setLocation","selected","setSelection","open","setOpen","loading","length","active","undefined","fetch","then","res","json","value","id","event","district","city","province","zipcode","props","params","InputProps","endAdornment"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport Typography from \"@mui/material/Typography\";\nimport { useEffect, useState } from \"react\";\nimport Autocomplete from \"@mui/material/Autocomplete\";\nimport TextField from \"@mui/material/TextField\";\nimport { Box } from \"@mui/system\";\nimport CircularProgress from '@mui/material/CircularProgress';\n\nfunction sleep(delay = 0) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, delay);\n  });\n}\n\nexport default function LocationForm() {\n  const [location, setLocation] = useState([]);\n  const [selected, setSelection] = useState([]);\n  const [open, setOpen] = React.useState(false);\n  const loading = open && location.length === 0;\n\n  //http://agent.land-prom.com/api/location.php\n  //   async function fetchData() {\n  //     const res = await fetch(\"http://agent.land-prom.com/api/location.php\");\n  //     res.json().then((res) => setLocation(res));\n  //   \n  // useEffect(() => {\n  //   fetch(\"http://agent.land-prom.com/api/location.php\").then((res) =>\n  //     res.json().then((res) => setLocation(res))\n  //   );\n  // }, []);\n\n  useEffect(() => {\n    let active = true;\n\n    if (!loading) {\n      return undefined;\n    }\n\n    (async () => {\n      await sleep(1e3); // For demo purposes.\n\n      if (active) {\n        fetch(\"http://agent.land-prom.com/api/location.php\").then((res) =>\n        res.json().then((res) => setLocation(res))\n      );\n      }\n    })();\n\n    return () => {\n      active = false;\n    };\n  }, [loading]);\n\n  React.useEffect(() => {\n    if (!open) {\n      setLocation([]);\n    }\n  }, [open]);\n\n\n//   console.log(selected);\n//   console.log(selected.id);\n  return (\n    <React.Fragment>\n      <Typography variant=\"h6\" gutterBottom>\n        ทำเลที่ตั้ง\n      </Typography>\n      <Grid container spacing={3}>\n        <Grid item xs={12}>\n          <Autocomplete\n          open={open}\n          onOpen={() => {\n            setOpen(true);\n          }}\n          onClose={() => {\n            setOpen(false);\n          }}\n            id=\"location\"\n            loading={loading}\n            options={location}\n            isOptionEqualToValue={(location, value) => location.id === value.id}\n            onChange={(event, value) => setSelection(value)}\n            getOptionLabel={(location)=> `${location.district} ${location.city} ${location.province} ${location.zipcode}`}\n            renderOption={(props, location) =>(\n                <Box component=\"li\" {...props} key={location.id}>\n                     {location.district}  {location.city} {location.province} {location.zipcode}\n                </Box>\n            )}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                label=\"ค้นหาทำเล\"\n                InputProps={{\n                  ...params.InputProps,\n                  endAdornment: (\n                    <React.Fragment>\n                      {loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\n                      {params.InputProps.endAdornment}\n                    </React.Fragment>\n                  ),\n                }}\n              />\n            )}\n            noOptionsText={'ไม่พบทำเล'}\n          />\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}